<% provide(:title, "Cart") %>
<div class="jumbotron">
	<h1>Cart</h1>
	<hr>
	<%= form_for @cart,  :as => :cart, :url => cart_path, 
                        :method => :put, :html => { :class => "row"} do |f| %>

		<div class="span12">
			<table class="table table-condensed table-hover">
				<thead>
					<tr>
						<th class="span2"> </th>
						<th>Item</th>
						<th class="span3">Price</th>
					</tr>
				</thead>

				<tbody>
					<% @cart.cart_items.each do |cart_item| %>
						<tr>
							<td>
								<%= link_to "X", destroy_cart_item_path(cart_item), :method => :destroy %>
								<%= number_field "cart_item", cart_item.id,  :class => "input-small", 
    																											:value => cart_item.quantity, :min => "1" %>
							</td>
							<td>
								<%= link_to cart_item.product.name, product_path(cart_item.product) %>
								<% if !cart_item.variants.empty? %>
									<ul>
										<% cart_item.variants.each do |v| %>
											<li><%= "#{v.name} (#{number_to_currency v.price})" %></li>
										<% end %>
									</ul>
								<% end %>
							</td>
							<td><%= number_to_currency cart_item.totalPrice %></td>
						</tr>
					<% end %>
				</tbody>
			</table>
		</div>

		<%= f.submit "Update cart", class: "btn btn-success icon pull-right" %>

  <% end %>
</div>